<!DOCTYPE html>
<html lang="en">

<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <meta http-equiv="X-UA-Compatible" content="ie=edge">
 
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js" type=" text/javascript"></script>
 
 <title>Qb Table</title>
    <style>
        table, th, td 
        {
            margin:10px 0;
            border:solid 1px #333;
            padding:2px 4px;
            font:5px Verdana;
        }
        th {
            font-weight:bold;
        }
    </style>

</head>

<body>

<div id = "everything">
<input type="button" onclick="CreateTableFromJSON()" value="Create Table From JSON" />

<div id="showData"></div>

 <!-- <script src=""></script> -->
   
 <script type="text/javascript">

 //$("document").ready(function() {

   var qbStats = (function (){
      
    var qbStats = null;
     // const info = btoa("stewartrhodes"+":"+"Rhodes");
     //const info = 'c3Rld2FydHJob2RlczpSaG9kZXM';
     //console.log('btoa: ', info);
     $.ajax({
       type: "GET",
       url: "https://api.mysportsfeeds.com/v1.2/pull/nfl/2017-regular/cumulative_player_stats.json?playerstats=Att,Comp,Yds,TD&position=QB",
       dataType: 'json',
       async: false,
       global: false,
       success: function(data) {
         qbStats = data;
       },
       headers: {
         "Authorization": "Basic " + btoa("stewartrhodes" + ":" + "Rhodes")
         //data:'{ "comment" }',
       }
    // }).then(function(response) {
         // console.log(response);

    // });
   //   }).then(function(response){
     //      return qbStats;
        });
          return qbStats;
  
      })();
   // });

   function createTableFromJSON(qbStats){
       // EXTRACT VALUE FOR HTML HEADER. 
     
        var col = [];
        for (var i = 0; i < qbStats.length; i++) {
            for (var key in qbStats[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }

        // CREATE DYNAMIC TABLE.
        var table = document.createElement("table");

        // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

        var tr = table.insertRow(-1);                   // TABLE ROW.

        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");      // TABLE HEADER.
            th.innerHTML = col[i];
            tr.appendChild(th);
        }

        // ADD JSON DATA TO THE TABLE AS ROWS.
        for (var i = 0; i < qbStats.length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = qbStats[i][col[j]];
            }
        }

        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);

   }
  

 </script>

</div>

</body>

</html>